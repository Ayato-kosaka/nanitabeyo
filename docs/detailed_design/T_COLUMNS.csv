"t_name","c_name","c_datatype","c_primary","c_foreign_key","c_unique","c_not_null","c_default","c_index","c_comment","c_check","c_updatable","","t_name_error"
"users","id","UUID",true,false,false,true,"N/A",true,"ユーザ ID","","","",""
"users","username","text",false,false,true,true,"N/A",true,"ログイン用ユーザ名","","","",""
"users","display_name","text",false,false,false,false,"N/A",false,"表示名","","","",""
"users","avatar","text",false,false,false,false,"N/A",false,"アバター画像 URL","","","",""
"users","bio","text",false,false,false,false,"N/A",false,"自己紹介","","","",""
"users","last_login_at","timestamptz",false,false,false,false,"N/A",false,"最終ログイン日時","","","",""
"users","created_at","timestamptz",false,false,false,true,"N/A",false,"作成日時","","","",""
"users","updated_at","timestamptz",false,false,false,true,"N/A",false,"更新日時","","","",""
"users","lock_no","integer",false,false,false,true,"N/A",false,"楽観ロック用のバージョン番号","","","",""
"dish_categories","id","text",true,false,false,true,"N/A",true,"Wikidata QID などの一意なID（例：Q1338822）","","","",""
"dish_categories","label_en","text",false,false,false,true,"N/A",false,"英語の正規表記名（例：Samgyeopsal）","","","",""
"dish_categories","labels","jsonb",false,false,false,true,"N/A",false,"多言語ラベル（{ ""ja"": ""サムギョプサル"", ""ko"": ""삼겹살"" }）","","","",""
"dish_categories","image_url","text",false,false,false,true,"N/A",false,"P18 (画像) 由来のURL","","","",""
"dish_categories","origin","text[]",false,false,false,true,"N/A",false,"原産国QID（例：[""Q884""] for South Korea）","","","",""
"dish_categories","cuisine","text[]",false,false,false,true,"N/A",false,"cuisineに関係するQID（例：[""Q647500""]）","","","",""
"dish_categories","tags","text[]",false,false,false,true,"N/A",true,"再帰的に得られた上位カテゴリのQID群（木登り結果）","","","",""
"dish_categories","created_at","timestamptz",false,false,false,true,"N/A",false,"作成日時","","","",""
"dish_categories","updated_at","timestamptz",false,false,false,true,"N/A",false,"更新日時","","","",""
"dish_categories","lock_no","integer",false,false,false,true,"N/A",false,"楽観ロック用のバージョン番号","","","",""
"dish_category_variants","id","UUID",true,false,false,true,"N/A",true,"一意なID","","","",""
"dish_category_variants","dish_category_id","text",false,"dish_categories.id",false,true,"N/A",true,"紐づく料理カテゴリのQID","","","",""
"dish_category_variants","surface_form","text",false,false,true,true,"N/A","B-tree + GIN","表記ゆれ文字列（例：""gyudon"", ""ぎゅうどん""） ※  CHECK (surface_form = lower(surface_form))","","","",""
"dish_category_variants","source","text",false,false,false,false,"N/A",false,"登録元情報（例：""wikidata-label"", ""katakana-gen""）","","","",""
"dish_category_variants","created_at","timestamptz",false,false,false,true,"N/A",false,"作成日時","","","",""
"dishes","id","UUID",true,false,false,true,"N/A",true,"一意な ID","","","",""
"dishes","restaurant_id","UUID",false,"restaurants.id",false,true,"N/A",true,"紐づくレストラン ID","","","",""
"dishes","category_id","text",false,"dish_categories.id",false,true,"N/A",true,"料理カテゴリ ID","","","",""
"dishes","name","text",false,false,false,false,"N/A",false,"料理名","","","",""
"dishes","created_at","timestamptz",false,false,false,true,"N/A",false,"作成日時","","","",""
"dishes","updated_at","timestamptz",false,false,false,true,"N/A",false,"更新日時","","","",""
"dishes","lock_no","integer",false,false,false,true,"N/A",false,"楽観ロック用のバージョン番号","","","",""
"dish_media","id","UUID",true,false,false,true,"N/A",true,"一意な ID","","","",""
"dish_media","dish_id","UUID",false,"dishes.id",false,true,"N/A",true,"紐づく料理 ID","","","",""
"dish_media","user_id","UUID",false,"users.id",false,false,"N/A",false,"投稿ユーザ ID","","","",""
"dish_media","media_path","text",false,false,true,true,"N/A",false,"メディア ストレージ パス","","","",""
"dish_media","media_type","text",false,false,false,true,"N/A",false,"メディア種別（image / video など）","","","",""
"dish_media","thumbnail_path","text",false,false,false,true,"N/A",false,"サムネイル ストレージ パス ※video用image の場合はmediaと同じ。","","","",""
"dish_media","created_at","timestamptz",false,false,false,true,"N/A",false,"作成日時","","","",""
"dish_media","updated_at","timestamptz",false,false,false,true,"N/A",false,"更新日時","","","",""
"dish_media","lock_no","integer",false,false,false,true,"N/A",false,"楽観ロック用のバージョン番号","","","",""
"dish_likes","id","UUID",true,false,false,true,"N/A",true,"一意な ID","","","",""
"dish_likes","dish_media_id","UUID",false,"dish_media.id","A",true,"N/A",true,"いいね対象メディア ID","","","",""
"dish_likes","user_id","UUID",false,"users.id","A",true,"N/A",true,"いいねしたユーザ ID","","","",""
"dish_likes","created_at","timestamptz",false,false,false,true,"N/A",false,"作成日時","","","",""
"dish_reviews","id","UUID",true,false,false,true,"N/A",true,"一意な ID","","","",""
"dish_reviews","dish_id","UUID",false,"dishes.id",false,true,"N/A",true,"レビュー対象料理 ID","","","",""
"dish_reviews","comment","text",false,false,false,true,"N/A",false,"レビュー本文","","","",""
"dish_reviews","comment_tsv","tsvector",false,false,false,true,"N/A","GIN インデックス","全文検索用 tsvector (GENERATED ALWAYS AS (to_tsvector('simple', coalesce(comment,''))) STORED)","","","",""
"dish_reviews","original_language_code","char(2)",false,false,false,true,"N/A",false,"レビューの言語","","","",""
"dish_reviews","user_id","UUID",false,"users.id",false,false,"N/A",false,"レビューユーザ ID","","","",""
"dish_reviews","rating","smallint",false,false,false,true,"N/A",false,"評価（★）","","","",""
"dish_reviews","price_cents","int",false,false,false,false,"N/A",false,"価格（センチ単位）","","","",""
"dish_reviews","currency_code","char(3)",false,false,false,false,"N/A",false,"通貨コード","","","",""
"dish_reviews","created_dish_media_id","UUID",false,"dish_media.id",false,true,"N/A",false,"どのメディア IDに対するレビューか","","","",""
"dish_reviews","imported_user_name","text",false,false,false,false,"N/A",false,"インポート元ユーザ名","","","",""
"dish_reviews","imported_user_avatar","text",false,false,false,false,"N/A",false,"インポート元ユーザアバター","","","",""
"dish_reviews","created_at","timestamptz",false,false,false,true,"N/A",true,"作成日時","","","",""
"user_seen_dish_media","id","UUID",true,false,false,true,"N/A",true,"一意な ID","","","",""
"user_seen_dish_media","dish_media_id","UUID",false,"dish_media.id","A",true,"N/A",true,"閲覧対象メディア ID","","","",""
"user_seen_dish_media","user_id","UUID",false,"users.id","A",true,"N/A",true,"閲覧したユーザ ID","","","",""
"user_seen_dish_media","created_at","timestamptz",false,false,false,true,"N/A",false,"作成日時","","","",""
"restaurants","id","UUID",true,false,false,true,"N/A",true,"一意な ID","","","",""
"restaurants","google_place_id","text",false,false,"A",true,"N/A",true,"Google Place ID","","","",""
"restaurants","name","text",false,false,false,true,"N/A",false,"店名","","","",""
"restaurants","name_language_code","text",false,false,false,true,"N/A",false,"店名言語","","","",""
"restaurants","latitude","DOUBLE PRECISION",false,false,false,true,"N/A",false,"緯度経度本体","","","",""
"restaurants","longitude","DOUBLE PRECISION",false,false,false,true,"N/A",false,"緯度経度本体","","","",""
"restaurants","location","geography(Point,4326)",false,false,false,true,"N/A","GIST(location)","検索用緯度経度（Point）","","","",""
"restaurants","image_url","text",false,false,false,true,"N/A",false,"店舗画像 URL","","","",""
"restaurants","created_at","timestamptz",false,false,false,true,"N/A",false,"作成日時","","","",""
"restaurant_bids","id","UUID",true,false,false,true,"N/A",true,"一意な ID","","","",""
"restaurant_bids","restaurant_id","UUID",false,"restaurants.id",false,true,"N/A",true,"対象レストラン ID","","","",""
"restaurant_bids","user_id","UUID",false,"users.id",false,true,"N/A",false,"入札ユーザ ID","","","",""
"restaurant_bids","payment_intent_id","text",false,false,false,false,"N/A",false,"決済 Intent ID","","","",""
"restaurant_bids","amount_cents","bigint",false,false,false,true,"N/A",false,"入札額 ※CHECK (amount_cents > 0)","","","",""
"restaurant_bids","currency_code","char(3)",false,false,false,true,"N/A",false,"通貨コード","","","",""
"restaurant_bids","start_date","date",false,false,false,true,"N/A",false,"表示開始日CHECK (start_date < end_date) ","","","",""
"restaurant_bids","end_date","date",false,false,false,true,"N/A",false,"表示終了日","","","",""
"restaurant_bids","status","enum('pending','paid','refunded')",false,false,false,true,"N/A",false,"ステータス","","","",""
"restaurant_bids","refund_id","text",false,false,false,false,"N/A",false,"返金 ID","","","",""
"restaurant_bids","created_at","timestamptz",false,false,false,true,"N/A",false,"作成日時","","","",""
"restaurant_bids","updated_at","timestamptz",false,false,false,true,"N/A",false,"更新日時","","","",""
"restaurant_bids","lock_no","integer",false,false,false,true,"N/A",false,"楽観ロック用のバージョン番号","","","",""
"payouts","id","UUID",true,false,false,true,"N/A",true,"一意な ID","","","",""
"payouts","bid_id","UUID",false,"restaurant_bids.id","B",true,"N/A",false,"対応する入札 ID","","","",""
"payouts","transfer_id","text",false,false,"A",false,"N/A",false,"Transfer ID","","","",""
"payouts","dish_media_id","UUID",false,"dish_media.id","B",true,"N/A",true,"対象メディア ID","","","",""
"payouts","amount_cents","bigint",false,false,false,true,"N/A",false,"支払額（センチ単位, >0）","","","",""
"payouts","currency_code","char(3)",false,false,false,false,"N/A",false,"通貨コード","","","",""
"payouts","status","enum('pending','paid','refunded')",false,false,false,false,"N/A",false,"ステータス","","","",""
"payouts","created_at","timestamptz",false,false,false,true,"N/A",true,"作成日時","","","",""
"payouts","updated_at","timestamptz",false,false,false,true,"N/A",false,"更新日時","","","",""
"payouts","lock_no","integer",false,false,false,true,"N/A",false,"楽観ロック用のバージョン番号","","","",""
"reactions","id","text",true,false,false,true,"N/A","","リアクションの一意なID（UUID）","",false,"",""
"reactions","user_id","uuid","",false,true,true,"N/A","","リアクションをしたユーザーのID（匿名可）","",false,"",""
"reactions","target_type","text","",false,true,true,"N/A","","リアクション対象のテーブル（例：spot, spot_guide）","","","",""
"reactions","target_id","text","",false,true,true,"N/A",true,"対象となるスポットやガイドのID","",false,"",""
"reactions","action_type","text","",false,true,true,"N/A","","実行されたアクションの種類（例：like, bookmark）","",false,"",""
"reactions","meta","jsonb","",false,false,false,"N/A","","メタ情報を格納するJSONBフィールド","","","",""
"reactions","created_at","timestamptz","",false,false,true,"N/A","","リアクション作成日時","","","",""
"reactions","created_version","text","",false,false,true,"N/A","","実行時のアプリバージョン（バグ分析用途）","",false,"",""
"reactions","lock_no","integer","",false,false,true,"N/A","","楽観ロック用バージョン番号","","","",""
"frontend_event_logs","id","text",true,false,false,true,"N/A","","フロントログの一意なID（UUID）","","","",""
"frontend_event_logs","user_id","uuid","",false,false,false,"N/A","","操作を行ったユーザーのID","","","",""
"frontend_event_logs","event_name","text","",false,false,false,"N/A","","イベント名（例：onPressPlay, mounted）","","","",""
"frontend_event_logs","error_level","enum ('verbose', 'debug', 'log', 'warn', 'error')","",false,false,false,"N/A",true,"エラーレベル","","","",""
"frontend_event_logs","path_name","text","",false,false,false,"N/A","","アクセス時のパス（例：/spot-guide/display）","","","",""
"frontend_event_logs","payload","text","",false,false,false,"N/A","","任意のイベント追加情報（例：{ spot_id: 'abc' }）","","","",""
"frontend_event_logs","created_at","timestamptz","",false,false,true,"N/A",true,"イベント発生日時","","","",""
"frontend_event_logs","created_app_version","text","",false,false,true,"N/A","","イベント発生時のアプリバージョン","","","",""
"frontend_event_logs","created_commit_id","text","",false,false,true,"N/A","","発生時のコードバージョン（Git SHAなど）","","","",""
"external_api_logs","id","text",true,false,false,true,"N/A","","外部APIログの一意なID（UUID）","","","",""
"external_api_logs","request_id","text","",false,false,false,"N/A",true,"呼び出し単位のトレースID（ログ間の関連付けに使用）","","","",""
"external_api_logs","function_name","text","",false,false,false,"N/A","","呼び出し元の関数名（例：recognizeSpot）","","","",""
"external_api_logs","api_name","text","",false,false,false,"N/A","","使用した外部APIの名前（例：GoogleVision）","","","",""
"external_api_logs","endpoint","text","",false,false,false,"N/A","","APIエンドポイント（例：/v1/images:annotate）","","","",""
"external_api_logs","method","text","",false,false,false,"N/A","","HTTPメソッド（例：GET, POST, PUT, DELETE）","","","",""
"external_api_logs","request_payload","json","",false,false,false,"N/A","","APIリクエストの内容","","","",""
"external_api_logs","response_payload","json","",false,false,false,"N/A","","APIレスポンスの内容","","","",""
"external_api_logs","status_code","smallint","",false,false,false,"N/A",true,"HTTPステータスコード（例：200, 500）","","","",""
"external_api_logs","error_message","text","",false,false,false,"N/A","","エラー発生時のメッセージ（例外を文字列化）","","","",""
"external_api_logs","response_time_ms","integer","",false,false,false,"N/A","","レスポンスまでの所要時間（ミリ秒）","","","",""
"external_api_logs","user_id","uuid","",false,false,false,"N/A","","API呼び出し元のユーザーID","","","",""
"external_api_logs","created_at","timestamptz","",false,false,true,"N/A",true,"呼び出し日時","","","",""
"external_api_logs","created_commit_id","text","",false,false,true,"N/A","","呼び出し時のコードバージョン（Git SHAなど）","","","",""
"backend_event_logs","id","text",true,false,false,true,"N/A","","バックエンドログの一意なID（UUID）","","","",""
"backend_event_logs","event_name","text","",false,false,false,"N/A","","イベント名（例：guide_rendered, cache_cleared）","","","",""
"backend_event_logs","error_level","enum ('verbose', 'debug', 'log', 'warn', 'error')","",false,false,false,"N/A",true,"エラーレベル","","","",""
"backend_event_logs","function_name","text","",false,false,false,"N/A","","実行された関数名（Cloud Function名など）","","","",""
"backend_event_logs","user_id","uuid","",false,false,false,"N/A","","操作を行ったユーザーID（匿名含む）","","","",""
"backend_event_logs","payload","json","",false,false,false,"N/A","","イベントに付随する情報","","","",""
"backend_event_logs","request_id","text","",false,false,false,"N/A",true,"外部APIとの紐づけに使うトレースID","","","",""
"backend_event_logs","created_at","timestamptz","",false,false,true,"N/A",true,"イベント発生日時","","","",""
"backend_event_logs","created_commit_id","text","",false,false,true,"N/A","","実行時のコードバージョン（Git SHA）","","","",""
"prompt_families","id","text",true,false,false,true,"N/A","","プロンプトファミリーの一意なID（UUID）","","","",""
"prompt_families","name","text",false,false,false,true,"N/A","","プロンプトファミリー名（例: friendly_guide）","","","",""
"prompt_families","description","text",false,false,false,true,"N/A","","説明メモ（開発者/編集者向け）","","","",""
"prompt_families","purpose","enum('spot_guide_manuscript')",false,false,false,true,"N/A","","プロンプトの目的種別","","","",""
"prompt_families","weight","integer",false,false,false,true,"N/A","","利用優先度（0なら非アクティブ扱い）","","","",""
"prompt_variants","id","text",true,false,false,true,"N/A","","プロンプトバリエーションのID（UUID）","","","",""
"prompt_variants","family_id","text",false,"prompt_families(id)",true,true,"N/A",true,"紐づくプロンプトファミリーID","","","",""
"prompt_variants","variant_number","integer",false,false,true,true,"N/A",true,"ファミリー内のバージョン番号（1〜）","","","",""
"prompt_variants","prompt_text","text",false,false,false,true,"N/A","","実際にLLMに渡すプロンプトテンプレート","","","",""
"prompt_variants","improvement_note","text",false,false,false,false,"N/A","","改善ポイントやコメント","","","",""
"prompt_variants","created_by","text",false,false,false,true,"N/A","","作成者","","","",""
"prompt_variants","metadata","jsonb",false,false,false,false,"N/A","","将来の柔軟性を確保するための拡張フィールド","","","",""
"prompt_usages","id","text",true,false,false,true,"N/A","","利用ログの一意なID（UUID）","","","",""
"prompt_usages","family_id","text",false,false,false,true,"N/A",true,"使用されたプロンプトファミリーID","","","",""
"prompt_usages","variant_id","text",false,false,false,true,"N/A",true,"使用されたプロンプトバリエーションID","","","",""
"prompt_usages","target_type","text",false,false,false,true,"N/A",true,"生成対象のモデル種別（例：Postなど）","","","",""
"prompt_usages","target_id","text",false,false,false,true,"N/A",true,"対象レコードのID","","","",""
"prompt_usages","generated_text","text",false,false,false,true,"N/A","","実際に生成されたガイド原稿","","","",""
"prompt_usages","used_prompt_text","text",false,false,false,true,"N/A","","使用されたプロンプトテンプレートのスナップショット","","","",""
"prompt_usages","input_data","jsonb",false,false,false,false,"N/A","","入力値（例：スポット名、ジャンルなど）","","","",""
"prompt_usages","llm_model","text",false,false,false,true,"N/A","","使用したLLM（例：claude-3, gpt-4 など）","","","",""
"prompt_usages","temperature","numeric(3,2)",false,false,false,false,"N/A","","LLM生成時のtemperature設定","","","",""
"prompt_usages","generated_user","uuid",false,false,false,true,"N/A","","生成実行者（デフォルト生成ガイドの場合は usr_id_for_system）","","","",""
"prompt_usages","created_at","timestamptz",false,false,false,true,"N/A","","作成日時","","","",""
"prompt_usages","created_request_id","text",false,false,false,true,"N/A","","作成した処理単位のトレースID","","","",""
"prompt_usages","metadata","jsonb",false,false,false,false,"N/A","","将来のA/Bテスト用メタ情報など","","","",""
"config","key","text",true,false,false,true,"N/A","","設定値のキー（例：v1_min_frontend_log_level）","","","",""
"config","value","text",false,false,false,true,"N/A","","設定値の値（例：info, 2 など）","","","",""
"config","description","text",false,false,false,false,"N/A","","設定内容の補足説明（任意）","","","",""